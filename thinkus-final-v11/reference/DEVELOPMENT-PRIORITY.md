# Thinkus 开发优先级指南

> **版本: v11.0 | 日期: 2026-01-15**
>
> **为AI开发者准备的开发路线图**

---

## 开发阶段总览

```
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                          │
│   P0 - MVP核心         P1 - 核心体验        P2 - 商业化                 │
│   ═══════════          ═══════════          ═══════════                 │
│   4周                  4周                  3周                         │
│                                                                          │
│   ┌───────────────┐    ┌───────────────┐    ┌───────────────┐          │
│   │ • 用户认证     │    │ • 多高管讨论   │    │ • 支付集成     │          │
│   │ • 邀请码验证   │    │ • 智能调度     │    │ • 用量追踪     │          │
│   │ • 项目CRUD    │    │ • Pinecone记忆 │    │ • 用户邀请码   │          │
│   │ • 基础讨论    │    │ • 进化记忆     │    │ • 定价评估     │          │
│   │ • 简单记忆    │    │ • 每日例会     │    │                │          │
│   └───────────────┘    └───────────────┘    └───────────────┘          │
│                                                                          │
│   ─────────────────────────────────────────────────────────────────────  │
│                                                                          │
│   P3 - 增强功能        P4 - 优化                                        │
│   ═══════════          ═══════════                                      │
│   4周                  持续                                             │
│                                                                          │
│   ┌───────────────┐    ┌───────────────┐                               │
│   │ • 外部专家     │    │ • 性能优化     │                               │
│   │ • 技能蒸馏     │    │ • 成本优化     │                               │
│   │ • 自动执行系统 │    │ • 用户反馈     │                               │
│   │ • CEO Dashboard│    │ • 迭代改进     │                               │
│   │ • 交付物管理   │    │                │                               │
│   └───────────────┘    └───────────────┘                               │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## P0 - MVP核心 (4周)

### 目标
让用户能够注册、创建项目、与AI高管讨论

### 功能清单

```yaml
Week 1-2: 基础设施
  ────────────────────
  
  用户系统:
    □ 邮箱注册/登录
    □ OAuth登录 (Google, GitHub)
    □ 邀请码验证 (注册时必须)
    □ 用户Profile基础
  
  数据库:
    □ MongoDB连接和基础Schema
    □ User, Project, Discussion模型
    □ 基础索引
  
  基础API:
    □ tRPC设置
    □ 认证中间件
    □ 基础CRUD接口

Week 3-4: 核心功能
  ────────────────────
  
  项目管理:
    □ 创建项目 (描述需求)
    □ 项目列表
    □ 项目详情
    □ 阶段状态
  
  基础讨论:
    □ 开始讨论 (单高管)
    □ 发送消息
    □ 接收AI回复
    □ 讨论历史
  
  简单记忆:
    □ 讨论结论存储 (MongoDB)
    □ 上下文注入
  
  邀请系统:
    □ 排队申请页面
    □ 排队状态查询
    □ 邀请码验证和使用
```

### 技术要点

```typescript
// P0阶段的核心数据流
User → Project → Discussion → AI Response

// 关键技术点
1. NextAuth.js认证设置
2. tRPC基础路由
3. MongoDB Mongoose模型
4. Claude API单轮对话
5. 基础UI组件 (shadcn/ui)
```

### 验收标准

```yaml
功能验收:
  □ 用户可以使用邀请码注册
  □ 用户可以创建项目
  □ 用户可以与单个AI高管对话
  □ 讨论历史可以查看
  □ 新用户可以申请排队

性能验收:
  □ 页面加载 < 2秒
  □ AI响应首token < 3秒
```

---

## P1 - 核心体验 (4周)

### 目标
多高管讨论、智能调度、向量记忆

### 功能清单

```yaml
Week 5-6: 多高管讨论
  ────────────────────
  
  智能调度:
    □ 阶段核心高管配置
    □ 话题分析 (Haiku)
    □ 动态加入专家
    □ 复杂度评估
  
  多Agent讨论:
    □ 多高管轮流发言
    □ 讨论编排逻辑
    □ 讨论总结生成
    □ 结论提取
  
  讨论UI:
    □ 多头像显示
    □ 发言者标识
    □ 实时流式输出
    □ 讨论进度指示

Week 7-8: 记忆系统
  ────────────────────
  
  Pinecone集成:
    □ 索引创建
    □ 命名空间设计 (user_{userId}_{agentId})
    □ 向量存储
    □ 相似度检索
  
  双层记忆:
    □ 项目记忆 (Layer 2)
    □ 用户偏好记忆 (Layer 1)
    □ 记忆写入触发
    □ 记忆检索注入
  
  每日例会:
    □ 定时任务设置
    □ 例会流程
    □ 纪要生成
    □ 通知发送
```

### 技术要点

```typescript
// P1阶段的核心数据流
User → Project → SchedulingEngine → MultiAgentDiscussion → Memory

// 关键技术点
1. Pinecone向量数据库集成
2. OpenAI Embedding API
3. 多Agent编排逻辑
4. node-cron定时任务
5. 流式响应 (SSE/Socket.io)
```

### 验收标准

```yaml
功能验收:
  □ 多个高管可以参与讨论
  □ 系统根据话题自动选择高管
  □ 记忆可以跨会话持久化
  □ 每日例会自动执行
  □ 高管"记得"之前的讨论

性能验收:
  □ 记忆检索 < 500ms
  □ 多Agent首响应 < 5秒
```

---

## P2 - 商业化 (3周)

### 目标
支付、订阅、用户邀请码

### 功能清单

```yaml
Week 9-10: 支付系统
  ────────────────────
  
  Stripe集成:
    □ Stripe账户设置
    □ 产品和价格配置
    □ Checkout Session
    □ Webhook处理
    □ 订阅管理
  
  订阅功能:
    □ 套餐选择页面
    □ 支付流程
    □ 订阅状态查看
    □ 升级/降级
    □ 取消订阅
  
  用量追踪:
    □ 讨论次数计数
    □ 专家咨询计数
    □ 配额限制
    □ 用量展示

Week 11: 用户邀请码
  ────────────────────
  
  邀请码分配:
    □ 付费用户获得邀请码
    □ 邀请码列表
    □ 邀请码状态
  
  邀请追踪:
    □ 谁使用了邀请码
    □ 邀请统计
    □ 邀请奖励 (可选)
```

### 技术要点

```typescript
// P2阶段的核心数据流
User → Subscription → Payment → Quota Management

// 关键技术点
1. Stripe API集成
2. Webhook安全验证
3. 订阅状态同步
4. 用量计数和限制
```

### 验收标准

```yaml
功能验收:
  □ 用户可以选择套餐并支付
  □ 支付成功后订阅生效
  □ 用量超限时有提示
  □ 付费用户获得邀请码
  □ 邀请码可以正常使用

业务验收:
  □ 支付流程顺畅
  □ 订阅状态准确
```

---

## P3 - 增强功能 (4周)

### 目标
外部专家、自动执行、CEO Dashboard

### 功能清单

```yaml
Week 12-13: 外部专家
  ────────────────────
  
  专家系统:
    □ 20位外部专家配置
    □ 专家咨询接口
    □ 咨询额度管理
    □ 专家列表展示
  
  技能蒸馏:
    □ 匿名化处理
    □ 技能提取逻辑
    □ 共享技能库
    □ 静默分发

Week 14-15: 自动执行和Dashboard
  ────────────────────
  
  决策系统:
    □ 决策分级引擎
    □ 风险评估
    □ 确认请求
    □ 执行追踪
  
  CEO Dashboard:
    □ 公司概览
    □ 待确认决策
    □ AI工作成果
    □ 通知中心
    □ 每日摘要
  
  交付物管理:
    □ 交付物列表
    □ 版本管理
    □ 确认流程
```

### 技术要点

```typescript
// P3阶段的核心数据流
DataSensing → ExecutiveDiscussion → DecisionEngine → AutoExecutor

// 关键技术点
1. 决策分级算法
2. 通知系统 (多渠道)
3. Dashboard实时数据
4. 技能蒸馏管道
```

---

## P4 - 持续优化

### 重点领域

```yaml
性能优化:
  - 数据库查询优化
  - 缓存策略
  - 前端性能
  - API响应时间

成本优化:
  - 模型选择优化
  - 缓存AI响应
  - 减少重复调用
  - Token使用优化

用户体验:
  - 收集用户反馈
  - A/B测试
  - 功能迭代
  - UI/UX改进

稳定性:
  - 错误监控
  - 告警系统
  - 自动恢复
  - 备份策略
```

---

## 技术债务管理

### 允许的技术债务 (P0-P2)

```yaml
可以先简化:
  - 记忆检索可以先用简单相似度
  - 多Agent可以串行执行
  - 通知可以只用邮件
  - Dashboard可以简化

必须做好:
  - 用户数据隔离
  - 认证安全
  - 支付安全
  - 数据备份
```

### 技术债务清理 (P3-P4)

```yaml
P3清理:
  - 记忆检索优化
  - 多Agent并行
  - 多渠道通知

P4清理:
  - 全面性能优化
  - 代码重构
  - 测试覆盖
```

---

## 团队分工建议

```yaml
AI开发者分工:

前端开发:
  - Next.js页面
  - UI组件
  - 状态管理
  - 实时更新

后端开发:
  - tRPC API
  - MongoDB操作
  - Pinecone集成
  - 定时任务

AI集成:
  - Claude API调用
  - Prompt工程
  - 多Agent编排
  - 记忆系统

基础设施:
  - 部署配置
  - 监控告警
  - 日志收集
  - 备份恢复
```

---

## 关键里程碑

```yaml
Week 4: MVP可用
  - 用户可以注册和使用
  - 基础讨论功能完整
  - 邀请系统运行

Week 8: 核心体验完整
  - 多高管讨论流畅
  - 记忆系统工作
  - 自动例会运行

Week 11: 可以收费
  - 支付流程完整
  - 订阅管理完善
  - 用户邀请码运行

Week 15: 功能完整
  - 外部专家可用
  - CEO Dashboard完整
  - 自动执行系统运行
```

---

**相关文档**:
- [PRD](../core/01-PRD.md)
- [技术架构](../core/02-ARCHITECTURE.md)
- [数据模型](../core/03-DATA-MODELS.md)
