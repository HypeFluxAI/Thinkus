# Thinkus 产品需求文档 (AI开发者优化版)

> 版本: 6.0.0 | 日期: 2026-01-10

---

## 1. 产品定义

```yaml
名称: Thinkus
定位: AI驱动的创业成功平台
愿景: 让任何人都能把想法变成产品

核心价值:
  对用户: "说出想法 → 拿到可运营的产品"
  差异化: "不只交付代码，而是帮用户成功"

四大核心技术壁垒:
  1. 结构化规格系统: 自然语言→精确规格→精准代码
  2. 知识积累库: 每个项目积累，边际成本递减
  3. 多专家讨论: 多角度优化方案
  4. 提示词进化系统: 系统越用越聪明 ⭐ NEW

目标用户:
  主要: 非技术创业者、产品经理、独立开发者
  次要: 中小企业、创意工作者
```

---

## 2. 核心流程

```
用户说出想法
     ↓
AI专家团队讨论 ⭐ (多Agent提示词驱动)
     ↓
生成结构化规格 ⭐ (核心技术)
     ↓
用户确认方案
     ↓
支付
     ↓
AI团队精准开发 (基于规格+提示词)
     ↓
产品上线 🎉
     ↓
规格入库积累 ⭐
     ↓
提示词效果收集 → 自动优化 ⭐ NEW
     ↓
持续运营支持
```

---

## 3. 功能模块

### 3.1 用户系统

| 功能 | 说明 | 优先级 |
|------|------|--------|
| 邮箱注册/登录 | 邮箱+密码 | P0 |
| OAuth登录 | Google, GitHub | P0 |
| 个人设置 | 语言、主题、通知 | P1 |
| 凭证管理 | 存储用户的API密钥 | P1 |

### 3.2 项目创建 ⭐ 核心

| 功能 | 说明 | 优先级 |
|------|------|--------|
| AI对话描述 | 自然语言描述需求 | P0 |
| 实时功能识别 | AI实时识别功能模块 | P0 |
| 专家讨论 | 多Agent讨论优化方案 | P0 |
| 方案确认 | 查看并确认功能和价格 | P0 |
| 支付 | Stripe支付 | P0 |

### 3.3 专家讨论系统 ⭐ 核心创新

```yaml
专家团队:
  核心专家 (始终参与):
    - mike: 产品经理 - 功能完整性
    - elena: UX设计师 - 用户体验
    - david: 技术架构师 - 技术可行性
  
  扩展专家 (按需参与):
    - sarah: 产品策略师 - 复杂项目
    - alex: 安全专家 - 支付/敏感数据
    - lisa: 增长专家 - 复杂项目
    - kevin: 区块链专家 - Web3项目
    - frank: 金融专家 - 金融项目
    - helen: 医疗专家 - 医疗项目

讨论流程:
  1. 需求理解: 澄清用户需求
  2. 方案构思: 各专家提出建议
  3. 挑战质疑: 互相挑战，发现问题
  4. 方案综合: 形成最终方案
  5. 最终确认: 所有专家签字

讨论模式:
  quick: 30秒-1分钟，直接看结论
  standard: 2-3分钟，观看关键讨论 [默认]
  deep: 5-10分钟，完整参与
  expert: 用户主导讨论
```

### 3.4 开发进度

| 功能 | 说明 | 优先级 |
|------|------|--------|
| 进度展示 | 阶段进度条 + 百分比 | P0 |
| 实时预览 | 看到页面生成过程 | P0 |
| 开发日志 | 实时日志流 | P0 |
| AI团队状态 | 各Agent当前状态 | P1 |
| 等待任务 | 用户可做的事 | P1 |
| 通知 | 完成时通知用户 | P0 |

### 3.5 项目完成

| 功能 | 说明 | 优先级 |
|------|------|--------|
| 庆祝页面 | 彩带动画 + 成就展示 | P0 |
| 产品预览 | 多设备预览 | P0 |
| 分享功能 | 生成分享图片 | P1 |
| 下一步引导 | SEO、数据分析等 | P1 |

### 3.6 项目管理

| 功能 | 说明 | 优先级 |
|------|------|--------|
| 项目列表 | 查看所有项目 | P0 |
| 项目详情 | 查看单个项目 | P0 |
| 资产管理 | 代码、数据库、域名 | P1 |
| 数据分析 | 访问量、用户数 | P2 |

### 3.7 仪表盘

| 功能 | 说明 | 优先级 |
|------|------|--------|
| 欢迎区 | 个性化问候 + 快速创建 | P0 |
| 进行中项目 | 突出显示 | P0 |
| 统计概览 | 项目数、访客数等 | P1 |
| 最近项目 | 项目卡片列表 | P0 |

---

## 4. 支持的产品类型

```yaml
基础类型:
  - web: Web应用 (SaaS/电商/官网)
  - mobile: 移动应用 (iOS/Android/跨平台)
  - game: 游戏 (H5/Unity/小游戏)
  - desktop: 桌面软件 (Electron)

专业类型:
  - blockchain: 区块链 (NFT/DeFi/智能合约)
  - finance: 金融系统 (交易/支付/合规)
  - healthcare: 医疗系统 (HIPAA合规)
```

---

## 5. 复杂度与定价

```yaml
复杂度定义:
  L1:
    描述: 简单落地页/展示站
    页面: 3-5页
    价格: $49
    时间: 数小时
    
  L2:
    描述: 标准应用
    页面: 5-10页
    功能: 用户系统+核心功能
    价格: $199
    时间: 1天
    
  L3:
    描述: 复杂应用
    页面: 10-20页
    功能: 多角色+复杂业务
    价格: $499
    时间: 2-3天
    
  L4:
    描述: 企业级应用
    页面: 20-50页
    功能: 多系统+高性能
    价格: $999
    时间: 3-5天
    
  L5:
    描述: 平台级产品
    页面: 50+页
    功能: 多端+生态
    价格: $2999+
    时间: 1-2周

可选服务:
  - seo: SEO优化 $99
  - analytics: 数据分析 $149
  - priority: 优先开发 $199 (快50%)
  - support: 延长支持 $299 (90天→1年)
```

---

## 6. 用户旅程

### 6.1 新用户首次使用

```yaml
1_发现:
  触点: 搜索/社交/推荐
  页面: 首页
  目标: 了解价值，产生兴趣

2_尝试:
  动作: 在首页输入想法
  体验: 无需注册即可体验AI理解
  目标: 感受价值

3_注册:
  动作: 注册账号
  方式: 邮箱/Google/GitHub
  目标: 开始正式使用

4_创建:
  动作: 与AI对话描述需求
  体验: 实时看到AI理解和功能识别
  目标: 完成需求描述

5_讨论:
  动作: 观看专家讨论
  体验: 看到多角度的专业分析
  目标: 获得优化后的方案

6_确认:
  动作: 查看并确认方案
  体验: 清晰的功能和价格
  目标: 确认并支付

7_等待:
  动作: 观看开发进度
  体验: 透明的进度+有事可做
  目标: 不焦虑地等待

8_上线:
  动作: 查看完成的产品
  体验: 庆祝+成就感
  目标: 开始运营
```

### 6.2 关键体验点

```yaml
对话体验:
  - 像和真人聊天一样自然
  - 实时看到AI的理解
  - 可以随时澄清和修改

讨论体验:
  - 透明的讨论过程
  - 可以随时插入问题
  - 多角度的专业建议

等待体验:
  - 透明的进度
  - 实时的预览
  - 有意义的等待任务
  - 离开也不焦虑

完成体验:
  - 庆祝的仪式感
  - 成就的分享感
  - 明确的下一步
```

---

## 7. AI Agent系统

### 7.1 Agent团队

```yaml
产品组:
  - pm: 产品经理 - 需求分析、PRD
  - analyst: 需求分析师 - 业务流程

设计组:
  - ux: UX设计师 - 用户体验
  - ui: UI设计师 - 视觉设计

开发组:
  - architect: 架构师 - 系统架构
  - frontend: 前端开发 - 页面实现
  - backend: 后端开发 - API实现
  - tester: 测试工程师 - 自动测试

运维组:
  - devops: DevOps - CI/CD、部署
  - security: 安全专家 - 安全审计
```

### 7.2 Agent协作流程

```
用户需求
    ↓
PM Agent: 分析需求，生成PRD
    ↓
专家讨论: 多Agent讨论优化
    ↓
Design Agent: 生成UI设计
    ↓
Dev Agent: 并行开发 (前端+后端)
    ↓
Test Agent: 自动测试
    ↓
DevOps Agent: 部署上线
```

### 7.3 模型分配

```yaml
核心任务 (需要最强理解):
  - 需求分析: Claude Opus
  - 架构设计: Claude Opus
  - 复杂代码: Claude Opus

常规任务:
  - 代码生成: Claude Sonnet
  - UI生成: Claude Sonnet
  - 测试用例: Claude Sonnet

简单任务:
  - 日志分析: Claude Haiku
  - 简单修改: Claude Haiku
```

---

## 8. 技术栈

```yaml
前端:
  框架: Next.js 14 (App Router)
  语言: TypeScript
  样式: Tailwind CSS
  组件: shadcn/ui
  状态: Zustand
  请求: TanStack Query + tRPC

后端:
  框架: tRPC + Node.js
  数据库: MongoDB (Mongoose)
  缓存: Redis
  队列: BullMQ
  存储: S3/R2

AI:
  主模型: Claude (Opus/Sonnet/Haiku)
  协议: MCP (Model Context Protocol)

部署:
  前端: Vercel
  数据库: MongoDB Atlas
  域名: Cloudflare

支付:
  服务: Stripe
```

---

## 9. 页面列表

```yaml
营销页面:
  - /: 首页
  - /pricing: 定价页
  - /cases: 案例页

认证:
  - /login: 登录
  - /register: 注册
  - /forgot-password: 忘记密码

核心流程:
  - /create: 创建项目 (对话) ⭐
  - /create/confirm: 确认方案
  - /create/payment: 支付
  - /projects/[id]/progress: 开发进度 ⭐
  - /projects/[id]/complete: 完成页 ⭐

仪表盘:
  - /dashboard: 仪表盘首页
  - /projects: 项目列表
  - /projects/[id]: 项目详情

设置:
  - /settings: 设置首页
  - /settings/profile: 个人资料
  - /settings/credentials: 凭证管理
```

---

## 10. 非功能需求

```yaml
性能:
  首屏加载: < 2秒
  API响应: < 500ms
  AI响应: < 3秒 (首token)

可用性:
  SLA: 99.9%
  错误恢复: 自动重试

安全:
  认证: JWT + HttpOnly Cookie
  数据: 加密存储敏感信息
  API: Rate Limiting

可扩展:
  支持: 水平扩展
  数据库: 分片就绪
```

---

## 11. 开发优先级

```yaml
Phase 1 - MVP核心:
  - 用户注册/登录
  - AI对话创建 ⭐
  - 专家讨论 ⭐
  - 方案确认
  - 支付
  - 开发进度
  - 完成页

Phase 2 - 完善:
  - 仪表盘
  - 项目管理
  - 设置页面
  - 首页优化

Phase 3 - 增强:
  - 多产品类型
  - 资产管理
  - 数据分析
  - 模板市场
```

---

## 12. 成功指标

```yaml
业务指标:
  - 月活用户: 目标 10,000
  - 付费转化: 目标 5%
  - 客单价: 目标 $300
  - 月收入: 目标 $150,000

产品指标:
  - 项目完成率: > 95%
  - 用户满意度: NPS > 50
  - 产品存活率: > 70% (3个月)

技术指标:
  - 首屏加载: < 2秒
  - API可用性: > 99.9%
  - 错误率: < 0.1%

规格系统指标:
  - 代码准确率: > 95%
  - 返工次数: < 0.5次
  - 模板复用率: > 80%
```

---

## 13. 结构化规格系统 ⭐ 核心技术

### 13.1 系统概述

```yaml
核心理念: "自然语言 → 结构化规格 → 精准代码"

问题:
  - 自然语言有歧义 → AI理解偏差 → 代码不对
  - 长文档超出上下文 → AI只能看到部分
  - 返工多 → 成本高、体验差

解决方案:
  - PM Agent将用户需求转换为结构化规格
  - Dev Agent读取规格精准生成代码
  - 几乎不返工，质量高
```

### 13.2 规格体系

```yaml
三层架构:

  Layer_1_项目规格:
    文件: project.yaml
    内容: 项目元信息、功能列表、技术栈、页面列表
    
  Layer_2_精确定义:
    文件: 
      - data-models.ts (TypeScript数据模型)
      - api-specs.yaml (API接口定义)
    内容: 无歧义的类型和接口定义
    
  Layer_3_页面规格:
    文件: pages/*.yaml
    内容: 路由、布局、组件、状态、API调用

每个用户项目生成:
  {project-id}-specs/
  ├── project.yaml
  ├── data-models.ts
  ├── api-specs.yaml
  └── pages/*.yaml
```

### 13.3 生成流程

```yaml
Step_1:
  输入: 用户自然语言描述
  执行: PM Agent理解 + 专家讨论
  输出: 结构化需求

Step_2:
  输入: 结构化需求
  执行: PM Agent生成规格
  输出: project.yaml, data-models.ts, api-specs.yaml

Step_3:
  输入: 项目规格
  执行: Design Agent生成页面规格
  输出: pages/*.yaml

Step_4:
  输入: 完整规格包
  执行: Dev Agent精准生成代码
  输出: 完整可运行项目
```

### 13.4 效果对比

```yaml
传统AI开发:
  准确率: 60-70%
  返工: 2-3次
  Token消耗: 高

结构化规格:
  准确率: 95%+
  返工: 0-1次
  Token消耗: 降低60%
```

---

## 14. 知识积累库 ⭐ 核心资产

### 14.1 积累理念

```yaml
核心思想: "每个项目都是资产，边际成本递减"

积累内容:
  - 项目规格: 成功项目的完整规格
  - 功能模块: 可复用的功能定义
  - 页面模板: 验证过的页面规格
  - 最佳实践: 专家讨论的精华
```

### 14.2 知识库结构

```yaml
knowledge_base/
│
├── templates/              # 项目模板
│   ├── ecommerce/          # 电商模板
│   │   ├── project.yaml
│   │   ├── data-models.ts
│   │   └── pages/
│   ├── saas/               # SaaS模板
│   ├── social/             # 社交模板
│   ├── game/               # 游戏模板
│   └── ...
│
├── modules/                # 功能模块
│   ├── user-system/        # 用户系统
│   ├── payment/            # 支付模块
│   ├── notification/       # 通知模块
│   └── ...
│
├── components/             # UI组件库
│   ├── forms/
│   ├── tables/
│   ├── charts/
│   └── ...
│
├── patterns/               # 设计模式
│   ├── auth-flow.yaml
│   ├── crud-pattern.yaml
│   └── ...
│
└── learnings/              # 经验积累
    ├── expert-discussions/ # 专家讨论精华
    ├── user-feedback/      # 用户反馈
    └── optimizations/      # 优化经验
```

### 14.3 复用策略

```yaml
新项目流程:
  1. 分析用户需求
  2. 匹配最相似的模板 (template matching)
  3. 复用模板基础规格 (80%+ 复用)
  4. 只生成差异部分 (20% 定制)
  5. 项目完成后规格入库

复用收益:
  - 生成速度: 提升50%
  - 质量: 复用验证过的规格
  - 成本: Token消耗降低

边际成本递减:
  第1个电商项目: 100%生成
  第10个电商项目: 20%生成
  第100个电商项目: 5%生成
```

### 14.4 持续优化

```yaml
数据收集:
  - 每个项目的规格
  - 用户满意度评分
  - 返工次数和原因
  - 开发时间

分析优化:
  - 识别高频功能 → 优化模块
  - 分析返工原因 → 改进规格
  - 收集用户反馈 → 优化模板

迭代周期:
  - 每周: 分析新项目数据
  - 每月: 优化模板库
  - 每季: 新增模板类型
```

### 14.5 竞争壁垒

```yaml
数据飞轮:
  更多项目 → 更多规格积累
      ↓
  更好的模板 → 更高质量
      ↓
  更多用户 → 更多项目

护城河:
  - 规格库是独有资产
  - 竞争对手需要从零积累
  - 先发优势持续扩大
```

---

## 附录A: 术语表

```yaml
Thinkus: 产品名称
小T: AI助手品牌角色
项目: 用户创建的产品
方案: 专家讨论后的产品规格
复杂度: L1-L5等级
Agent: AI代理，执行特定任务
MCP: Model Context Protocol
结构化规格: 精确的项目定义文件
知识库: 积累的模板和经验
提示词: 指导LLM行为的指令
提示词进化: 提示词自动优化机制
多Agent审核: 自动化质量把关
```

---

## 15. 提示词系统 ⭐ 核心能力

### 15.1 系统架构

```yaml
核心理念: "提示词随使用不断优化，系统越用越聪明"

系统组成:
  1. 提示词库: 所有阶段的精细化提示词
  2. 加载器: 读取、渲染、变量替换
  3. A/B测试: 新版本灰度验证
  4. 多Agent审核: 自动质量评估
  5. 自动优化: 数据驱动的持续改进
```

### 15.2 提示词库结构

```yaml
prompts/
├── lib/                          # 核心库
│   ├── prompt-loader.ts          # 加载器
│   └── auto-review.ts            # 多Agent审核
│
├── agents/
│   ├── requirement/              # 需求理解
│   │   ├── understand.md         # 理解用户需求
│   │   └── feature-identify.md   # 功能识别
│   │
│   ├── discussion/               # 专家讨论
│   │   ├── orchestrator.md       # 讨论编排
│   │   ├── mike-pm.md            # 产品经理
│   │   ├── elena-ux.md           # UX设计师
│   │   ├── david-tech.md         # 技术架构师
│   │   ├── extended-experts.md   # 策略/安全/增长专家
│   │   └── synthesizer.md        # 方案综合
│   │
│   ├── spec-gen/                 # 规格生成
│   ├── code-gen/                 # 代码生成
│   ├── testing/                  # 测试修复
│   └── operations/               # 运营支持
```

### 15.3 多Agent审核委员会

```yaml
审核流程 (100%自动，无需人工):

  质量Agent:
    评估维度: 格式正确性、内容准确性、一致性、完整性
    输出: quality_score (0-100)

  安全Agent:
    评估维度: 幻觉风险、越界风险、注入抵抗
    输出: safety_score (0-100)

  效率Agent:
    评估维度: Token效率、响应速度、成本效益
    输出: efficiency_score (0-100)

自动决策:
  综合分 >= 95: 直接发布
  综合分 >= 80: 10% A/B测试
  综合分 >= 60: 返回优化引擎迭代
  综合分 < 60: 回滚到上一版本
```

### 15.4 评估指标

```yaml
核心指标:
  | 类别 | 指标 | 目标 | 权重 |
  |------|------|------|------|
  | 质量 | 格式正确率 | ≥98% | 15% |
  |      | 任务成功率 | ≥95% | 25% |
  |      | 一致性 | ≥90% | 10% |
  | 安全 | 幻觉率 | ≤2% | 15% |
  |      | 越界率 | ≤1% | 10% |
  |      | 注入抵抗 | ≥99% | 5% |
  | 效率 | Token消耗 | 持续优化 | 10% |
  |      | 响应时间 | ≤3s | 10% |

健康度等级:
  🟢 优秀 (90-100): 可作为范例
  🟡 良好 (80-89): 正常运行
  🟠 一般 (70-79): 触发优化
  🔴 较差 (<70): 紧急处理
```

### 15.5 自动进化流程

```yaml
完全自动化:
  触发: 定时(每周) / 异常(成功率下降) / 积累(失败样本>10)
  
  流程:
    1. 数据收集 → 最近7天执行数据
    2. 优化生成 → AI分析失败原因，生成新版本
    3. 测试执行 → 10个标准+5个边界用例
    4. 多Agent审核 → 3个Agent并行评估(约10秒)
    5. 自动决策 → 发布/测试/迭代/回滚
    6. 指标输出 → 更新仪表盘

人工介入: 仅在连续3次迭代失败时提醒关注
```

### 15.6 预期效果

```yaml
第1个月: 建立基线，识别低效提示词
第3个月: 成功率+10%，Token-15%
第6个月: 成功率>95%，返工率<5%
长期效果: 形成数据飞轮，持续进化
```

---

## 附录B: 相关文档

```yaml
核心规格:
  - specs/data-models.ts: 数据模型定义
  - specs/api-specs.yaml: API接口规格

页面规格:
  - pages/*.yaml: 各页面详细规格

流程定义:
  - flows/project-creation.yaml: 创建流程
  - flows/expert-discussion.yaml: 讨论流程

系统设计:
  - thinkus-structured-spec-system.md: 规格系统设计
  - thinkus-prompt-auto-evolution.md: 提示词自动进化

提示词系统:
  - prompts/lib/prompt-loader.ts: 加载器
  - prompts/lib/auto-review.ts: 多Agent审核
  - prompts/agents/: 各阶段提示词
```

