# ============================================================
# ç™»å½•é¡µ
# route: /login
# ============================================================

meta:
  route: /login
  layout: auth-center
  auth: false
  title: ç™»å½• - Thinkus

# ============================================================
# é¡µé¢ç»“æž„
# ============================================================
structure:
  type: centered-card
  maxWidth: 400px
  background: gradient(primary-50, warm-50)

# ============================================================
# ç»„ä»¶
# ============================================================
components:

  card:
    type: Card
    className: w-full max-w-md

    header:
      logo:
        icon: ðŸŒŸ
        text: Thinkus
      title: æ¬¢è¿Žå›žæ¥ ðŸ‘‹
      subtitle: ç»§ç»­ä½ çš„åˆ›ä¸šä¹‹æ—…

    content:
      # OAuthæŒ‰é’®
      oauth:
        - provider: google
          text: Google ç™»å½•
          icon: /icons/google.svg
          onClick: signIn('google')
        
        - provider: github
          text: GitHub ç™»å½•
          icon: /icons/github.svg
          onClick: signIn('github')

      divider:
        text: æˆ–ä½¿ç”¨é‚®ç®±

      # è¡¨å•
      form:
        id: login-form
        onSubmit: handleLogin
        
        fields:
          - name: email
            type: email
            label: é‚®ç®±
            placeholder: your@email.com
            validation:
              required: true
              email: true
            autoComplete: email

          - name: password
            type: password
            label: å¯†ç 
            placeholder: â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢
            showToggle: true
            validation:
              required: true
              minLength: 6
            autoComplete: current-password

        options:
          - type: checkbox
            name: remember
            label: è®°ä½æˆ‘

          - type: link
            text: å¿˜è®°å¯†ç ï¼Ÿ
            href: /forgot-password

        submit:
          text: ç™»å½•
          variant: default
          fullWidth: true
          loading: isLoading

    footer:
      text: è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ
      link:
        text: å…è´¹æ³¨å†Œ
        href: /register

# ============================================================
# çŠ¶æ€
# ============================================================
state:
  email: string = ''
  password: string = ''
  remember: boolean = false
  isLoading: boolean = false
  error: string | null = null

# ============================================================
# è¡Œä¸º
# ============================================================
behavior:

  handleLogin: |
    1. validate form
    2. set isLoading = true
    3. call auth.login({ email, password })
    4. on success: redirect to /dashboard
    5. on error: set error message
    6. set isLoading = false

  signIn: |
    (provider) => {
      call auth.oauth({ provider })
      // OAuth redirect handled by NextAuth
    }

# ============================================================
# APIè°ƒç”¨
# ============================================================
api:
  login:
    endpoint: auth.login
    onSuccess: router.push('/dashboard')
    onError: setError(error.message)
