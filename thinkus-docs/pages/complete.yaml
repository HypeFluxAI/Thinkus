# ============================================================
# é¡¹ç›®å®Œæˆé¡µ (åº†ç¥é¡µ)
# route: /projects/[id]/complete
# ============================================================

meta:
  route: /projects/[id]/complete
  layout: celebration
  auth: true
  params: { id: projectId }

# ============================================================
# ç»“æ„
# ============================================================
structure:
  type: single-column
  centered: true

sections:

  # åº†ç¥åŒº
  - id: celebration
    type: CelebrationHero
    props:
      confetti: true
      duration: 3000
      title: ğŸ‰ æ­å–œï¼ä½ çš„äº§å“ä¸Šçº¿äº†ï¼
      subtitle: ä»æƒ³æ³•åˆ°ä¸Šçº¿ï¼Œä½ åšåˆ°äº†ï¼
      
      project:
        name: ${project.name}
        icon: ${project.icon}
        url: ${deployment.url}
      
      preview:
        type: multi-device
        images: ${project.screenshots}
    
    className: min-h-[60vh] bg-gradient-to-br from-primary-100 via-white to-warm-100

  # æˆå°±å±•ç¤º
  - id: achievements
    type: AchievementGrid
    props:
      items:
        - { icon: â±ï¸, value: ${duration}, label: å®Œæˆæ—¶é—´, highlight: æ¯”ä¼ ç»Ÿå¿«99% }
        - { icon: ğŸ“„, value: ${pagesCount}, label: é¡µé¢æ•°é‡ }
        - { icon: âš™ï¸, value: ${apiCount}, label: APIæ¥å£ }
        - { icon: ğŸ’°, value: $${savedAmount}, label: ä¸ºä½ èŠ‚çœ }
    animation: count-up
    className: py-12 grid-cols-4 gap-4

  # åˆ†äº«
  - id: share
    type: ShareCard
    props:
      shareText: |
        æˆ‘ç”¨Thinkusåšäº†ä¸€ä¸ª${project.type}ï¼
        ä»æƒ³æ³•åˆ°ä¸Šçº¿åªç”¨äº†${duration} ğŸš€
      buttons:
        - { platform: twitter, text: åˆ†äº«åˆ° Twitter }
        - { platform: wechat, text: åˆ†äº«åˆ°å¾®ä¿¡ }
        - { platform: copy, text: å¤åˆ¶é“¾æ¥ }
    className: bg-gray-900 text-white rounded-2xl p-8

  # ä¸‹ä¸€æ­¥
  - id: next-steps
    type: NextStepsGrid
    props:
      title: æ¥ä¸‹æ¥...
      steps:
        - { icon: ğŸ”, title: SEOä¼˜åŒ–, href: /projects/${id}/seo }
        - { icon: ğŸ“Š, title: æŸ¥çœ‹æ•°æ®, href: /projects/${id}/analytics }
        - { icon: âœ¨, title: æ·»åŠ åŠŸèƒ½, href: /projects/${id}/chat }
        - { icon: â•, title: æ–°é¡¹ç›®, href: /create }
    className: py-12

# ============================================================
# çŠ¶æ€
# ============================================================
state:
  project: Project
  deployment: ProjectDeployment
  duration: string
  pagesCount: number
  apiCount: number
  savedAmount: number

# ============================================================
# API
# ============================================================
api:
  onMount:
    endpoint: projects.get
    input: { id: projectId }
    then: |
      setProject(response.project)
      setDeployment(response.project.deployment)
      calculateStats(response.project)
